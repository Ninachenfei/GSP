(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/confirm_order"],{"13a8":function(t,s,a){"use strict";a.r(s);var e=a("636b"),r=a("3f6f");for(var d in r)"default"!==d&&function(t){a.d(s,t,function(){return r[t]})}(d);a("24ac");var i=a("2877"),n=Object(i["a"])(r["default"],e["a"],e["b"],!1,null,"51895212",null);s["default"]=n.exports},"24ac":function(t,s,a){"use strict";var e=a("f740"),r=a.n(e);r.a},"3f6f":function(t,s,a){"use strict";a.r(s);var e=a("d1d7"),r=a.n(e);for(var d in e)"default"!==d&&function(t){a.d(s,t,function(){return e[t]})}(d);s["default"]=r.a},"636b":function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("view",{staticClass:"confirm-content"},[t.address?a("navigator",{staticClass:"address",attrs:{url:"/pages/user/address"}},[a("text",{staticClass:"iconfont f44"},[t._v("")]),a("view",{staticClass:"address-content"},[a("view",{staticClass:"address-info"},[a("text",{staticClass:"address-username"},[t._v(t._s(t.address.receiver))]),a("text",{staticClass:"address-mobile"},[t._v(t._s(t.address.mobile))])]),a("text",{staticClass:"address-text"},[t._v(t._s(t.address.receiving_area)+" "+t._s(t.address.address))])]),a("text",{staticClass:"iconfont f40"},[t._v("")])]):a("navigator",{staticClass:"address-nodata",attrs:{url:"/pages/user/add_address"}},[a("view",{staticClass:"address-nodata-left"},[a("text",{staticClass:"iconfont f40"},[t._v("")]),a("text",[t._v("收货地址未填写请前往填写")])]),a("text",{staticClass:"iconfont"},[t._v("")])]),t._l(t.goods,function(t,s){return a("order-item",{key:s,attrs:{goPage:"../index/detail?id="+t.id,data:t,mpcomid:"13bbeebe-0-"+s}})}),a("view",{staticClass:"confirm-footer"},[a("view",{staticClass:"confirm-footer-txt"},[t._v("共计"+t._s(t.addGoods.num)+"件商品 实付"),a("text",{staticClass:"theme-color"},[t._v("￥"+t._s(t.addGoods.price))])]),a("view",{staticClass:"confirm-btn",attrs:{eventid:"13bbeebe-0"},on:{click:t.cartorder}},[t._v("提交订单")])])],2)},r=[];a.d(s,"a",function(){return e}),a.d(s,"b",function(){return r})},"6aba":function(t,s,a){"use strict";a("263f");var e=d(a("b0ce")),r=d(a("13a8"));function d(t){return t&&t.__esModule?t:{default:t}}Page((0,e.default)(r.default))},d1d7:function(t,s,a){"use strict";(function(t){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var e=r(a("a951"));function r(t){return t&&t.__esModule?t:{default:t}}var d={data:function(){return{id:null,cartids:"",address:null,orders:[],goods:[]}},computed:{addGoods:function(){var t={price:0,num:0};return this.goods.forEach(function(s){t.price+=parseInt(s.num)*parseFloat(s.price),t.num+=1}),t}},onLoad:function(t){this.id=t.id},onShow:function(){this.getDefaultAddress()},created:function(){var s=this,a=t.getStorageSync("orders")||[];a&&a.length>0&&a instanceof Array&&(this.orders=a,a.forEach(function(t){s.getDetail(t.id,t.num)}))},methods:{getDetail:function(t,s){var a=this;this.$post("api/shop/product/detail",{id:t}).then(function(t){1==t.code?(t.data.num=s,a.goods.push(t.data)):a.$toast(t.msg)})},getDefaultAddress:function(){var t=this;this.$post("api/shop/product/shippingaddress").then(function(s){1==s.code&&s.data.data.length>0&&(t.address=s.data.data[0])})},cartorder:function(){var s=this;if(!this.address.id)return this.$toast("请填写收货地址"),!1;if(!this.goods||this.goods.length<=0)this.$toast("数据加载中...");else{var a={},e=[];this.orders.forEach(function(t){a[t.id]=[t.num,"",""],t.cartid&&e.push(t.cartid)}),a=JSON.stringify(a),e=e.join(","),this.$post("api/shop/cart/cartorder",{data:a,address_id:this.address.id,cartids:e}).then(function(a){1==a.code&&t.redirectTo({url:"../order/pay?id="+a.data+"&price="+s.addGoods.price}),s.$toast(a.msg)})}}},components:{OrderItem:e.default}};s.default=d}).call(this,a("6e42")["default"])},f740:function(t,s,a){}},[["6aba","common/runtime","common/vendor"]]]);