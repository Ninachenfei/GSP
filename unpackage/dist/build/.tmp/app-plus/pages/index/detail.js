(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/detail"],{"0349":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(a("ce52")),s=r(a("72fe")),o=(r(a("22d6")),r(a("6a9c"))),n=r(a("e411")),c=r(a("d829"));function r(t){return t&&t.__esModule?t:{default:t}}function l(t){return f(t)||d(t)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function f(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}var m={data:function(){return{contentText:{contentdown:"点击显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"},id:0,data:{},avatar:i.default,page:1,loadStatus:"more",comments:[],commentTsotal:0,attr:{num:1,selectTxt:null,show:!1,list:[{key:"颜色分类",index:0,vals:["银色","深空灰色"]},{key:"网络分类",index:0,vals:["无线网络","无线局域网+蜂窝网络机型"]},{key:"储存容量",index:0,vals:["64GB","256GB"]}]}}},onLoad:function(t){this.id=t.id,this.getDetail(),this.getCommonts()},components:{CommentItem:s.default,PopupLayer:o.default,uParse:n.default,LoadMore:c.default},computed:{content2:function(){return this.content}},onNavigationBarButtonTap:function(e){t.switchTab({url:"../order/shopcar"})},methods:{goStore:function(){0!=this.data.uid?t.navigateTo({url:"../store/homepage?id="+this.data.uid}):this.$toast("平台发布 暂无店铺")},loadmoreCommont:function(){"more"==this.loadStatus&&(this.page++,this.getCommonts())},getCommonts:function(){var e=this;1==this.page&&(this.comments=t.getStorageSync("product_evaluationlist")||[]),this.$post("api/shop/product/evaluationlist",{id:this.id,page:this.page}).then(function(a){var i;1==a.code?(e.commentTsotal=a.data.total,a.data.has_more?e.loadStatus="more":e.loadStatus="noMore",1==e.page?(e.comments=a.data.data,t.setStorageSync("product_evaluationlist",a.data.data)):(i=e.comments).push.apply(i,l(a.data.data))):(e.loadStatus="noMore",e.$toast(a.msg))})},showCommont:function(){this.$refs.popupCommont.show()},preview:function(t,e){},navigate:function(t,e){},getDetail:function(){var t=this;this.$post("api/shop/product/detail",{id:this.id}).then(function(e){1==e.code?t.data=e.data:t.$toast(e.msg)})},selectAttr:function(){this.$refs.popup.show()},selectItemAttr:function(t,e){t.index=e},changeNum:function(t){"+"===t?this.attr.num=parseInt(this.attr.num)+1:"-"===t&&(this.attr.num<=1?this.$toast("购买数量最小为1"):this.attr.num=parseInt(this.attr.num)-1)},comfirmSelect:function(){var t=[],e=[];this.attr.list.forEach(function(a){var i={key:a.key,val:a.vals[a.index]};e.push(a.vals[a.index]),t.push(i)}),this.attr.selectTxt=e.join(","),this.$refs.popup.close()},collection:function(){var t=this;if(!this.id)return!1;this.data.is_collection=1-this.data.is_collection,this.$post("api/shop/product/collection",{id:this.id}).then(function(e){1!=e.code&&(t.data.is_collection=1-t.data.is_collection),t.$toast(e.msg)})},joinShopcar:function(){var t=this;return!!this.id&&(this.attr.num<=0?(this.attr.show=!0,!1):void this.$post("api/shop/cart/create",{id:this.id,num:this.attr.num,attributes:""}).then(function(e){t.$toast(e.msg)}))},goBuy:function(){try{t.setStorageSync("orders",[{num:this.attr.num,id:this.id}])}catch(e){}t.navigateTo({url:"confirm_order"})}}};e.default=m}).call(this,a("6e42")["default"])},"0f91":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"detail-content"},[a("swiper",{staticClass:"banners",attrs:{autoplay:"",circular:"","indicator-dots":"","indicator-color":"rgba(255,139,56,0.4)","indicator-active-color":"rgba(255,139,56)",interval:3e3}},t._l(t.data.images,function(t,e){return a("swiper-item",{key:e,attrs:{mpcomid:"23ec50ff-0-"+e}},[a("image",{staticClass:"banner-img",attrs:{mode:"aspectFill",src:t}})])})),a("view",{staticClass:"info"},[a("view",{staticClass:"info-top"},[a("text",{staticClass:"info-price"},[t._v("$"+t._s(t.data.price))])]),a("view",{staticClass:"info-title"},[t._v(t._s(t.data.title))]),a("view",{staticClass:"info-yunfei"},[a("text",[t._v("运费:"+t._s(t.data.freight)+"元")]),a("view",[a("text",{staticClass:"theme-color"},[t._v(t._s(t.data.sales_volume))]),t._v("人购买")])])]),a("view",{staticClass:"plr30"},[a("view",{staticClass:"select",attrs:{eventid:"23ec50ff-0"},on:{click:t.selectAttr}},[t.attr.selectTxt?a("view",{staticClass:"attr-select-txt"},[t._v("["),a("text",[t._v(t._s(t.data.title))]),t._v("] * "+t._s(t.attr.num))]):a("text",[t._v("请商品数量")]),a("text",{staticClass:"iconfont"},[t._v("")])])]),a("view",{staticClass:"comment"},[a("view",{staticClass:"comment-title",attrs:{eventid:"23ec50ff-1"},on:{click:t.showCommont}},[a("text",{staticClass:"comment-title-txt"},[t._v("用户评价")]),a("view",{staticClass:"comment-title-more"},[t._v(t._s(t.commentTsotal)+"条评价"),a("text",{staticClass:"iconfont"},[t._v("")])])]),a("view",{staticClass:"comment-list"},[t.comments&&t.comments[0]?a("comment-item",{attrs:{data:t.comments[0],mpcomid:"23ec50ff-1"}}):t._e()],1)]),0!=t.data.uid?a("navigator",{staticClass:"store",attrs:{url:"../store/homepage?id="+t.data.uid}},[a("image",{staticClass:"store-avatar",attrs:{src:t.data.business_info&&t.data.business_info.logo,mode:"aspectFill"}}),a("view",{staticClass:"store-title"},[a("text",{staticClass:"store-title-txt"},[t._v(t._s(t.data.business_info&&t.data.business_info.name))])]),a("view",{staticClass:"store-link"},[t._v("进店")])]):t._e(),a("view",{staticClass:"content"},[a("view",{staticClass:"content-title"},[t._v("图文介绍")]),a("u-parse",{staticClass:"rich-text",attrs:{content:t.data.content,eventid:"23ec50ff-2",mpcomid:"23ec50ff-2"},on:{preview:t.preview,navigate:t.navigate}})],1),a("view",{staticClass:"detail-footer"},[a("view",{staticClass:"store-btn",attrs:{eventid:"23ec50ff-3"},on:{click:t.goStore}},[a("text",{staticClass:"iconfont"},[t._v("")]),a("text",[t._v("店铺")])]),a("view",{staticClass:"coll-btn",class:{active:1==t.data.is_collection},attrs:{eventid:"23ec50ff-4"},on:{click:t.collection}},[1==t.data.is_collection?a("text",{staticClass:"iconfont"},[t._v("")]):a("text",{staticClass:"iconfont"},[t._v("")]),a("text",[t._v("收藏")])]),a("view",{staticClass:"shopcar-btn",attrs:{eventid:"23ec50ff-5"},on:{click:t.joinShopcar}},[t._v("加入购物车")]),a("view",{staticClass:"shoping-btn",attrs:{eventid:"23ec50ff-6"},on:{click:t.goBuy}},[t._v("立即购买")])]),a("popup-layer",{ref:"popupCommont",attrs:{direction:"top",mpcomid:"23ec50ff-5"}},[a("view",{staticClass:"comment-list popup-commonts"},[t._l(t.comments,function(t,e){return a("comment-item",{key:e,attrs:{data:t,mpcomid:"23ec50ff-3-"+e}})}),a("load-more",{attrs:{status:t.loadStatus,contentText:t.contentText,eventid:"23ec50ff-7",mpcomid:"23ec50ff-4"},on:{click:t.loadmoreCommont}})],2)]),a("popup-layer",{ref:"popup",attrs:{direction:"top",mpcomid:"23ec50ff-6"}},[a("view",{staticClass:"pupup-bg"},[a("view",{staticClass:"popup-nums"},[a("text",{staticClass:"popup-inner-title"},[t._v("购买数量")]),a("view",{staticClass:"popup-inputs"},[a("text",{staticClass:"iconfont popup-iconfont",attrs:{eventid:"23ec50ff-8"},on:{click:function(e){t.changeNum("-")}}},[t._v("")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.attr.num,expression:"attr.num"}],staticClass:"popup-input",attrs:{type:"number",disabled:"",eventid:"23ec50ff-9"},domProps:{value:t.attr.num},on:{input:function(e){e.target.composing||(t.attr.num=e.target.value)}}}),a("text",{staticClass:"iconfont popup-iconfont",attrs:{eventid:"23ec50ff-10"},on:{click:function(e){t.changeNum("+")}}},[t._v("")])])]),a("button",{staticClass:"btn-block mt-70",attrs:{eventid:"23ec50ff-11"},on:{click:t.comfirmSelect}},[t._v("确定")])],1)])],1)},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},"27c7":function(t,e,a){},6276:function(t,e,a){"use strict";a.r(e);var i=a("0349"),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=s.a},"9c6b":function(t,e,a){"use strict";var i=a("27c7"),s=a.n(i);s.a},b3ab:function(t,e,a){"use strict";a("263f");var i=o(a("b0ce")),s=o(a("f695"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(s.default))},f695:function(t,e,a){"use strict";a.r(e);var i=a("0f91"),s=a("6276");for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);a("9c6b");var n=a("2877"),c=Object(n["a"])(s["default"],i["a"],i["b"],!1,null,"33862abc",null);e["default"]=c.exports}},[["b3ab","common/runtime","common/vendor"]]]);