(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/index"],{"123f":function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s=o(e("a951")),i=o(e("25fc"));function o(t){return t&&t.__esModule?t:{default:t}}function n(t){return d(t)||c(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function d(t){if(Array.isArray(t)){for(var a=0,e=new Array(t.length);a<t.length;a++)e[a]=t[a];return e}}var u={data:function(){return{tabIndex:0,list:[],loadStatus:"more",page:1}},components:{OrderItem:s.default,uniLoadMore:i.default},onLoad:function(t){this.tabIndex=t.type||0},created:function(){this.getData()},methods:{toggleTab:function(t){this.tabIndex=t,this.page=1,this.loadStatus="more",this.getData()},goPay:function(a){t.navigateTo({url:"../order/pay?id="+a.id+"&price="+a.total})},confirm:function(a){var e=this;t.showModal({title:"确认收货",content:"你确认收到货物了吗？",success:function(t){t.confirm&&e.confirmorder(a)}})},confirmorder:function(t){var a=this;this.$post("api/shop/order/confirmorder",{id:t}).then(function(t){1==t.code&&(a.page=1,a.loadStatus="more",a.getData()),a.$toast(t.msg)})},getData:function(){var a=this,e={page:this.page},s=this.tabIndex;0!=s&&(e.status=s),1==this.page&&(this.list=t.getStorageSync("order_lists_"+s)),this.$post("api/shop/order/lists",e).then(function(i){var o;1==i.code?(i.data.has_more?a.loadStatus="more":a.loadStatus="noMore",1==e.page?(a.list=i.data.data,t.setStorageSync("order_lists_"+s,i.data.data)):(o=a.list).push.apply(o,n(i.data.data))):(a.loadStatus="noMore",a.$toast(i.msg))})}},onReachBottom:function(){"more"==this.loadStatus&&(this.page++,this.getData())}};a.default=u}).call(this,e("6e42")["default"])},"25ce":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("view",{staticClass:"order-content"},[e("view",{staticClass:"order-tabs"},[e("view",{staticClass:"order-tab",class:{active:0==t.tabIndex},attrs:{eventid:"b1969840-0"},on:{click:function(a){t.toggleTab(0)}}},[t._v("全部")]),e("view",{staticClass:"order-tab",class:{active:1==t.tabIndex},attrs:{eventid:"b1969840-1"},on:{click:function(a){t.toggleTab(1)}}},[t._v("待付款")]),e("view",{staticClass:"order-tab",class:{active:2==t.tabIndex},attrs:{eventid:"b1969840-2"},on:{click:function(a){t.toggleTab(2)}}},[t._v("待发货")]),e("view",{staticClass:"order-tab",class:{active:3==t.tabIndex},attrs:{eventid:"b1969840-3"},on:{click:function(a){t.toggleTab(3)}}},[t._v("待收货")]),e("view",{staticClass:"order-tab",class:{active:4==t.tabIndex},attrs:{eventid:"b1969840-4"},on:{click:function(a){t.toggleTab(4)}}},[t._v("已完成")])]),e("view",{staticClass:"order-list"},[t._l(t.list,function(a,s){return e("view",{key:s,staticClass:"order-list-item"},[e("view",{staticClass:"order-item-top"},[e("view",{staticClass:"order-item-store"},[a.business_info&&a.business_info.name?[e("text",{staticClass:"iconfont f40"},[t._v("")]),e("text",{staticClass:"order-store-name"},[t._v(t._s(a.business_info.name))]),e("text",{staticClass:"iconfont f30"},[t._v("")])]:t._e()],2),1==a.status?e("text",{staticClass:"order-item-status"},[t._v("待付款")]):2==a.status?e("text",{staticClass:"order-item-status"},[t._v("待发货")]):3==a.status?e("text",{staticClass:"order-item-status"},[t._v("待收货")]):4==a.status?e("text",{staticClass:"order-item-status"},[t._v("已完成")]):5==a.status?e("text",{staticClass:"order-item-status"},[t._v("已取消")]):t._e()]),e("order-item",{attrs:{goPage:"../order/detail?id="+a.id,data:a,mpcomid:"b1969840-1-"+s}}),a.logistics_company?e("view",{staticClass:"order-express"},[e("text",[t._v("物流公司: "+t._s(a.logistics_company))]),e("text",[t._v("物流单号: "+t._s(a.tracking_number))])]):t._e(),e("view",{staticClass:"order-add"},[e("text",[t._v("共一件商品 合计:")]),e("text",{staticClass:"price-color"},[t._v("￥"+t._s(a.total))])]),e("view",{staticClass:"order-btns"},[1==a.status?e("view",{staticClass:"order-btn",attrs:{eventid:"b1969840-6-"+s},on:{click:function(e){t.goPay(a)}}},[t._v("去付款")]):3==a.status?e("view",{staticClass:"order-btn",attrs:{eventid:"b1969840-5-"+s},on:{click:function(e){t.confirm(a.id)}}},[t._v("确认收货")]):t._e()])],1)}),e("uni-load-more",{attrs:{status:t.loadStatus,mpcomid:"b1969840-2"}})],2)])},i=[];e.d(a,"a",function(){return s}),e.d(a,"b",function(){return i})},"5c55":function(t,a,e){"use strict";e.r(a);var s=e("123f"),i=e.n(s);for(var o in s)"default"!==o&&function(t){e.d(a,t,function(){return s[t]})}(o);a["default"]=i.a},"690c":function(t,a,e){"use strict";var s=e("b57d"),i=e.n(s);i.a},8721:function(t,a,e){"use strict";e.r(a);var s=e("25ce"),i=e("5c55");for(var o in i)"default"!==o&&function(t){e.d(a,t,function(){return i[t]})}(o);e("690c");var n=e("2877"),r=Object(n["a"])(i["default"],s["a"],s["b"],!1,null,"65a1aa28",null);a["default"]=r.exports},b57d:function(t,a,e){},b5ff:function(t,a,e){"use strict";e("263f");var s=o(e("b0ce")),i=o(e("8721"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(i.default))}},[["b5ff","common/runtime","common/vendor"]]]);