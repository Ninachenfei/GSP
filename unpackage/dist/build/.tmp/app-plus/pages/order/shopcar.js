(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/shopcar"],{"0618":function(t,s,a){"use strict";a.r(s);var i=a("114e"),e=a("c315");for(var o in e)"default"!==o&&function(t){a.d(s,t,function(){return e[t]})}(o);a("d2bd");var n=a("2877"),c=Object(n["a"])(e["default"],i["a"],i["b"],!1,null,"18503d7a",null);s["default"]=c.exports},"114e":function(t,s,a){"use strict";var i=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("view",{staticClass:"shopcar"},[t.add.allNum<=0&&t.list.length<=0?a("view",{staticClass:"shopcar-kong"},[a("image",{staticClass:"shaopcar-img",attrs:{src:"/static/img/shop/kong-gouwuche.png",mode:"aspectFit"}}),a("text",{staticClass:"shopcar-kong-txt"},[t._v("购物车还是空空的")]),a("text",{staticClass:"shopcar-kong-tip"},[t._v("快去看看需要点啥吧~")])]):a("view",{staticClass:"shopcar-list"},t._l(t.list,function(s,i){return t.list.length>0?a("view",{key:i,staticClass:"shopcar-item"},[a("view",{staticClass:"shopcar-content"},[a("text",{staticClass:"iconfont iconfont-select",class:{active:s.select},attrs:{eventid:"978f8ea8-0-"+i},on:{click:function(s){t.selectShop(i)}}},[t._v("")]),a("view",{staticClass:"shopcar-info"},[a("image",{staticClass:"shopcar-left-img",attrs:{src:s.image,mode:"aspectFill"}}),a("view",{staticClass:"shopcar-right"},[a("text",{staticClass:"shopcar-right-txt"},[t._v(t._s(s.title))]),a("view",{staticClass:"shopcar-options"}),a("view",{staticClass:"shopcar-price-wrap"},[a("text",{staticClass:"shop-price"},[t._v("￥"+t._s(s.price))]),a("view",{staticClass:"shopcar-price-input"},[a("view",{staticClass:"iconfont shopcar-input-item",attrs:{eventid:"978f8ea8-1-"+i},on:{click:function(s){t.changeNum(i,"-")}}},[t._v("")]),a("input",{directives:[{name:"model",rawName:"v-model",value:s.num,expression:"citem.num"}],staticClass:"shopcar-input",attrs:{type:"text",disabled:"",eventid:"978f8ea8-2-"+i},domProps:{value:s.num},on:{input:function(t){t.target.composing||(s.num=t.target.value)}}}),a("view",{staticClass:"iconfont shopcar-input-item",attrs:{eventid:"978f8ea8-3-"+i},on:{click:function(s){t.changeNum(i,"+")}}},[t._v("")])])])])])])]):t._e()})),a("view",{staticClass:"haohuo-pb200"},[a("view",{staticClass:"shopcar-title"},[t._v("好货推荐")]),a("view",{staticClass:"goods-list"},t._l(t.goodsList,function(t,s){return a("goods-item",{key:s,attrs:{data:t,mpcomid:"978f8ea8-0-"+s}})}))]),a("view",{staticClass:"shopcar-footer"},[t.add.allNum>0?a("view",{staticClass:"footer-left",attrs:{eventid:"978f8ea8-4"},on:{click:t.selectAll}},[a("text",{staticClass:"iconfont iconfont-select",class:{active:t.add.all}},[t._v("")]),a("text",[t._v("全选")])]):t._e(),a("view",{staticClass:"footer-right"},[a("text",{staticClass:"footer-add"},[t._v("合计:￥"+t._s(t.add.price))]),a("view",{staticClass:"footer-btn",attrs:{eventid:"978f8ea8-5"},on:{click:t.gobuy}},[t._v("去结算("+t._s(t.add.num)+")")])])])])},e=[];a.d(s,"a",function(){return i}),a.d(s,"b",function(){return e})},3827:function(t,s,a){"use strict";(function(t){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=e(a("c868"));e(a("acf1"));function e(t){return t&&t.__esModule?t:{default:t}}var o={data:function(){return{goodsList:[],list:[]}},created:function(){this.getGoodsList()},onShow:function(){this.getList()},onNavigationBarButtonTap:function(s){var a=this;if(this.add.num<=0)return this.$toast("请选择要移除的商品"),!1;0==s.index&&t.showModal({title:"确认移除",content:"确认要把所选移除购物车吗？",success:function(t){if(t.confirm){for(var s=[],i=0;i<a.list.length;i++)a.list[i].select&&(s.push(a.list[i].id),a.list.splice(i--,1));a.delShopcar(s)}}})},computed:{add:function(){var t=0,s=0,a=!0,i=0;return this.list.forEach(function(e,o){i++,e.select?(t+=parseFloat(e.price)*parseFloat(e.num),s+=1):a=!1}),t=Math.round(100*t)/100,{price:t,num:s,all:a,allNum:i}}},components:{GoodsItem:i.default},methods:{delShopcar:function(t){var s=this;t=t.join(","),this.$post("api/shop/cart/deletecart",{ids:t}).then(function(t){s.$toast(t.msg)})},getGoodsList:function(){var s=this;this.goodsList=t.getStorageSync("product_goodstype_8"),this.$post("api/shop/product/lists",{zone_type:8}).then(function(a){1==a.code?(s.goodsList=a.data.data,t.setStorageSync("product_goodstype_8",a.data.data)):(s.loadStatus="noMore",s.$toast(a.msg))})},getList:function(){var t=this;this.$post("api/shop/cart/cartlist").then(function(s){1==s.code?(s.data.forEach(function(t){return t.select=!1,t}),t.list=s.data):t.$toast(s.msg)})},gobuy:function(){if(this.add.num>0){var s=[];this.list.forEach(function(t,a){t.select&&s.push({num:t.num,id:t.product_id,cartid:t.id})});try{t.setStorageSync("orders",s)}catch(a){}t.navigateTo({url:"../index/confirm_order"})}else this.$toast("请选择要的购买商品")},selectAll:function(){var t=this.add.all;this.list.forEach(function(s,a){s.select=!t})},changeNum:function(t,s){"-"==s?this.list[t].num>1?this.list[t].num=parseInt(this.list[t].num)-1:this.$toast("最小购买的数量为1"):this.list[t].num=parseInt(this.list[t].num)+1},selectShop:function(t){this.list[t].select=!this.list[t].select}}};s.default=o}).call(this,a("6e42")["default"])},a0b6:function(t,s,a){},c315:function(t,s,a){"use strict";a.r(s);var i=a("3827"),e=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(s,t,function(){return i[t]})}(o);s["default"]=e.a},c879:function(t,s,a){"use strict";a("263f");var i=o(a("b0ce")),e=o(a("0618"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(e.default))},d2bd:function(t,s,a){"use strict";var i=a("a0b6"),e=a.n(i);e.a}},[["c879","common/runtime","common/vendor"]]]);